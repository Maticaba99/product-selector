{"remainingRequest":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/src/App.vue","mtime":1623329223078},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/cache-loader/dist/cjs.js","mtime":1623402537694},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/babel-loader/lib/index.js","mtime":1623402537665},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/cache-loader/dist/cjs.js","mtime":1623402537694},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/vue-loader/lib/index.js","mtime":1623402546143}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qZ2xvYmFsIEN1c3RvbUVsZW1lbnQqLwppbXBvcnQgQ2FsbG91dCBmcm9tICIuL2NvbXBvbmVudHMvQ2FsbG91dCI7CmltcG9ydCBEZWJ1ZyBmcm9tICIuL2NvbXBvbmVudHMvRGVidWciOwppbXBvcnQgQ29udGVudFR5cGVTZWxlY3RvciBmcm9tICIuL2NvbXBvbmVudHMvQ29udGVudFR5cGVTZWxlY3RvciI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgR2xvYmFsRXZlbnRCdXMgfSBmcm9tICIuL2dsb2JhbEV2ZW50QnVzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYXBwIiwKICBjb21wb25lbnRzOiB7CiAgICBDYWxsb3V0LAogICAgRGVidWcsCiAgICBDb250ZW50VHlwZVNlbGVjdG9yCiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgbG9hZGVkOiBmYWxzZSwKICAgIGVycm9yTWVzc2FnZTogIiIsCiAgICBlbGVtZW50OiB7fSwKICAgIGNvbnRleHQ6IHt9LAogICAgdmFsdWU6IG51bGwKICB9KSwKICBjcmVhdGVkOiBmdW5jdGlvbigpIHsKICAgIHRyeSB7CiAgICAgIEN1c3RvbUVsZW1lbnQuaW5pdCh0aGlzLmluaXRpYWxpemUpOwoKICAgICAgQ3VzdG9tRWxlbWVudC5vbkRpc2FibGVkQ2hhbmdlZCh0aGlzLmhhbmRsZURpc2FibGUpOwogICAgICBDdXN0b21FbGVtZW50Lm9ic2VydmVFbGVtZW50Q2hhbmdlcyhbXSwgZWxlbWVudENvZGVuYW1lID0+IHsKICAgICAgICBHbG9iYWxFdmVudEJ1cy4kZW1pdCgib25FbGVtZW50Q2hhbmdlZCIsIGVsZW1lbnRDb2RlbmFtZVswXSk7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvcjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEVsZW1lbnRWYWx1ZTogZnVuY3Rpb24oZWxlbWVudENvZGVuYW1lKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIEN1c3RvbUVsZW1lbnQuZ2V0RWxlbWVudFZhbHVlKGVsZW1lbnRDb2RlbmFtZSwgdmFsdWUgPT4gewogICAgICAgICAgICByZXNvbHZlKHZhbHVlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGlzYWJsZTogZnVuY3Rpb24oZGlzYWJsZVN0YXRlKSB7CiAgICAgIHRoaXMuZWxlbWVudC5kaXNhYmxlZCA9IGRpc2FibGVTdGF0ZTsKICAgIH0sCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZXh0KSB7CiAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7CiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmVsZW1lbnQudmFsdWUgPyBKU09OLnBhcnNlKHRoaXMuZWxlbWVudC52YWx1ZSkgOiBudWxsOwogICAgICB0aGlzLmxvYWRlZCA9IHRydWU7CiAgICAgIHRoaXMudXBkYXRlU2l6ZSgpOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIC8vIEV4cGxpY2l0bHkgdXNpbmcgPT0gdG8gbWF0Y2ggYm90aCBudWxsIGFuZCB1bmRlZmluZWQKICAgICAgY29uc3QgdG9TYXZlID0gdmFsdWUgPT0gbnVsbCA/IG51bGwgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7CiAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IHRvU2F2ZTsKICAgICAgQ3VzdG9tRWxlbWVudC5zZXRWYWx1ZSh0b1NhdmUpOwogICAgfSwKICAgIHVwZGF0ZVNpemUoKSB7CiAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLm1heCgKICAgICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LAogICAgICAgICAgZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsCiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0CiAgICAgICAgKTsKCiAgICAgICAgQ3VzdG9tRWxlbWVudC5zZXRIZWlnaHQoaGVpZ2h0KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuc2F2ZShuZXdWYWx1ZSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <Callout v-if=\"errorMessage\" type=\"error\" title=\"Something went wrong\">\n      <p>\n        {{ errorMessage }}\n      </p>\n    </Callout>\n    <div v-if=\"loaded\">\n      <ContentTypeSelector\n        :element=\"element\"\n        :context=\"context\"\n        :value.sync=\"value\"\n      />\n      <Debug\n        :element=\"element\"\n        :context=\"context\"\n        :value=\"value\"\n        @handleDisable=\"handleDisable\"\n      />\n      <resize-observer @notify=\"updateSize\" />\n    </div>\n  </div>\n</template>\n\n<script>\n/*global CustomElement*/\nimport Callout from \"./components/Callout\";\nimport Debug from \"./components/Debug\";\nimport ContentTypeSelector from \"./components/ContentTypeSelector\";\nimport Vue from \"vue\";\nimport { GlobalEventBus } from \"./globalEventBus\";\n\nexport default {\n  name: \"app\",\n  components: {\n    Callout,\n    Debug,\n    ContentTypeSelector\n  },\n  data: () => ({\n    loaded: false,\n    errorMessage: \"\",\n    element: {},\n    context: {},\n    value: null\n  }),\n  created: function() {\n    try {\n      CustomElement.init(this.initialize);\n\n      CustomElement.onDisabledChanged(this.handleDisable);\n      CustomElement.observeElementChanges([], elementCodename => {\n        GlobalEventBus.$emit(\"onElementChanged\", elementCodename[0]);\n      });\n    } catch (error) {\n      this.errorMessage = error;\n    }\n  },\n  methods: {\n    getElementValue: function(elementCodename) {\n      return new Promise((resolve, reject) => {\n        try {\n          CustomElement.getElementValue(elementCodename, value => {\n            resolve(value);\n          });\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    handleDisable: function(disableState) {\n      this.element.disabled = disableState;\n    },\n    initialize: function(element, context) {\n      this.element = element;\n      this.context = context;\n      this.value = this.element.value ? JSON.parse(this.element.value) : null;\n      this.loaded = true;\n      this.updateSize();\n    },\n    save: function(value) {\n      // Explicitly using == to match both null and undefined\n      const toSave = value == null ? null : JSON.stringify(value);\n      this.element.value = toSave;\n      CustomElement.setValue(toSave);\n    },\n    updateSize() {\n      Vue.nextTick(function() {\n        const height = Math.max(\n          document.body.scrollHeight,\n          document.body.offsetHeight,\n          document.documentElement.offsetHeight\n        );\n\n        CustomElement.setHeight(height);\n      });\n    }\n  },\n  watch: {\n    value: function(newValue) {\n      this.save(newValue);\n    }\n  }\n};\n</script>\n\n<style>\nhtml {\n  position: relative;\n}\n#app {\n  padding-top: 0.5em;\n}\n</style>\n"]}]}