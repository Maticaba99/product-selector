{"remainingRequest":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/thread-loader/dist/cjs.js!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/babel-loader/lib/index.js!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/src/components/ContentTypeSelector.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/src/components/ContentTypeSelector.vue","mtime":1623329223080},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/cache-loader/dist/cjs.js","mtime":1623402537694},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/thread-loader/dist/cjs.js","mtime":1623402537712},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/babel-loader/lib/index.js","mtime":1623402537665},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/cache-loader/dist/cjs.js","mtime":1623402537694},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/vue-loader/lib/index.js","mtime":1623402546143}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYXRpYXNjYWJhbGxlcm8vbWF0aWRldi9hYmcvYWJnLWN1c3RvbS1lbGVtZW50LXByb2R1Y3Qtc2VsZWN0b3Ivbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBNdWx0aXNlbGVjdDogTXVsdGlzZWxlY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWxlY3RlZFR5cGVzOiB0aGlzLnZhbHVlIHx8IFtdLAogICAgICBvcHRpb25zOiBbXSwKICAgICAgaXNMb2FkaW5nOiB0cnVlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hUeXBlcygpOwogIH0sCiAgcHJvcHM6IHsKICAgIGVsZW1lbnQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGNvbnRleHQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbGltaXRUZXh0OiBmdW5jdGlvbiBsaW1pdFRleHQoY291bnQpIHsKICAgICAgcmV0dXJuICJhbmQgIi5jb25jYXQoY291bnQsICIgb3RoZXIgY291bnRyaWVzIik7CiAgICB9LAogICAgZmV0Y2hUeXBlczogZnVuY3Rpb24gZmV0Y2hUeXBlcyhxdWVyeSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZmlyc3RVcGRhdGVWYWx1ZSwgbGFzdFVwZGF0ZVZhbHVlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGZpcnN0VXBkYXRlVmFsdWUgPSBfdGhpcy5lbGVtZW50LmNvbmZpZy5RVUVSWS5yZXBsYWNlKCIjI3F1ZXJ5IyMiLCBxdWVyeSk7CiAgICAgICAgICAgICAgICBsYXN0VXBkYXRlVmFsdWUgPSBmaXJzdFVwZGF0ZVZhbHVlLnJlcGxhY2UoIiMjcXVlcnkjIyIsIHF1ZXJ5KTsKICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaChfdGhpcy5lbGVtZW50LmNvbmZpZy5BUEksIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmFzaWMgIi5jb25jYXQoX3RoaXMuZWxlbWVudC5jb25maWcuQVBJX0FVVEgpLAogICAgICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgYm9keTogbGFzdFVwZGF0ZVZhbHVlCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoanNvbikgewogICAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zID0ganNvbi5oaXRzLmhpdHMubWFwKGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgIGlkOiBwcm9kdWN0Ll9zb3VyY2UucHJvZHVjdGZpZWxkcy51bmlxdWVfaWQsCiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm9kdWN0Ll9zb3VyY2UucHJvZHVjdGZpZWxkcy5wcm9kdWN0X25hbWVbImVuLXVzIl0sCiAgICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb25zOiBwcm9kdWN0Ll9zb3VyY2UucHJvZHVjdGNhcmQgJiYgcHJvZHVjdC5fc291cmNlLnByb2R1Y3RjYXJkLmRpbWVuc2lvbnNpbiwKICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiBwcm9kdWN0Ll9zb3VyY2UucHJvZHVjdGNhcmQgJiYgcHJvZHVjdC5fc291cmNlLnByb2R1Y3RjYXJkLmZlYXR1cmVpbWFnZSwKICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAxLAogICAgICAgICAgICAgICAgICAgICAgcHJpY2VfY2FkOiBwcm9kdWN0Ll9zb3VyY2UucHJvZHVjdGZpZWxkcy5iYXNlX3ByaWNlX2NhZCwKICAgICAgICAgICAgICAgICAgICAgIHByaWNlX3VzZDogcHJvZHVjdC5fc291cmNlLnByb2R1Y3RmaWVsZHMuYmFzZV9wcmljZV91c2QKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgX3RoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdCgpIHsKICAgICAgdGhpcy5zYXZlKHRoaXMuc2VsZWN0ZWRUeXBlcyk7CiAgICB9LAogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSh2YWx1ZSkgewogICAgICB0aGlzLiRlbWl0KCJ1cGRhdGU6dmFsdWUiLCB2YWx1ZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ContentTypeSelector.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <multiselect\n      v-model=\"selectedTypes\"\n      :key=\"option\"\n      placeholder=\"Select products\"\n      open-direction=\"bottom\"\n      :hide-selected=\"true\"\n      :options=\"options\"\n      :option-height=\"104\"\n      :multiple=\"true\"\n      :loading=\"isLoading\"\n      :internal-search=\"false\"\n      :close-on-select=\"false\"\n      label=\"name\"\n      track-by=\"name\"\n      :disabled=\"element.disabled\"\n      @input=\"onSelect\"\n      @onChange=\"onSelect\"\n      @search-change=\"fetchTypes\"\n      :clear-on-select=\"false\"\n      :options-limit=\"300\"\n      :limit-text=\"limitText\"\n      :custom-label=\"customLabel\"\n      :show-labels=\"false\"\n    >\n      <template slot=\"tag\" slot-scope=\"props\">\n        <div class=\"container selectedproduct\">\n          <div class=\"imageContainer\">\n            <img\n              class=\"option__image\"\n              :src=\"props.option.image\"\n              :alt=\"props.option.name\"\n            />\n            <div class=\"events\">\n              <span class=\"remove\" @click=\"props.remove(props.option)\">❌</span>\n              <span\n                class=\"add\"\n                @click=\"props.option.quantity = props.option.quantity - 1\"\n                >➖</span\n              >\n              <span\n                class=\"add\"\n                @click=\"props.option.quantity = props.option.quantity + 1\"\n                >➕</span\n              >\n              <span\n                class=\"remove\"\n                @click=\"selectedTypes.push([]) && selectedTypes.pop()\"\n                >✔</span\n              >\n            </div>\n          </div>\n          <span class=\"option__desc\">\n            <span class=\"option__title\"\n              ><strong>{{ props.option.name }}</strong></span\n            >\n            <span class=\"option__title\">{{ props.option.id }}</span>\n            <span class=\"option__title\"\n              ><strong>Qty: </strong> {{ props.option.quantity }}</span\n            >\n            <span class=\"option__title\"\n              ><strong>CAD: </strong> {{ props.option.price_cad }}</span\n            >\n            <span class=\"option__title\"\n              ><strong>USD: </strong> {{ props.option.price_usd }}</span\n            >\n          </span>\n        </div>\n      </template>\n\n      <template slot=\"option\" slot-scope=\"props\"\n        ><img\n          class=\"option__image\"\n          :src=\"props.option.image\"\n          :alt=\"props.option.name\"\n        />\n        <div class=\"option__desc\">\n          <span class=\"option__title\"\n            ><strong>{{ props.option.name }}</strong></span\n          ><span class=\"option__small\">{{ props.option.id }}</span>\n          <span class=\"option__small\">{{ props.option.dimensions }}</span>\n          <span class=\"option__small\">CAD:{{ props.option.price_cad }}</span>\n          <span class=\"option__small\">USD:{{ props.option.price_usd }}</span>\n        </div>\n      </template>\n    </multiselect>\n  </div>\n</template>\n\n<script>\nimport Multiselect from \"vue-multiselect\";\n\nexport default {\n  components: {\n    Multiselect\n  },\n  data() {\n    return {\n      selectedTypes: this.value || [],\n      options: [],\n      isLoading: true\n    };\n  },\n  created() {\n    this.fetchTypes();\n  },\n  props: {\n    element: {\n      type: Object,\n      required: true\n    },\n    context: {\n      type: Object,\n      required: true\n    },\n    value: {\n      type: Object\n    }\n  },\n  methods: {\n    limitText(count) {\n      return `and ${count} other countries`;\n    },\n    async fetchTypes(query) {\n      const firstUpdateValue = this.element.config.QUERY.replace(\n        \"##query##\",\n        query\n      );\n      const lastUpdateValue = firstUpdateValue.replace(\"##query##\", query);\n      this.isLoading = true;\n      await fetch(this.element.config.API, {\n        method: \"post\",\n        headers: {\n          Authorization: `Basic ${this.element.config.API_AUTH}`,\n          \"Content-Type\": \"application/json\"\n        },\n        body: lastUpdateValue\n      })\n        .then(response => response.json())\n        .then(json => {\n          this.options = json.hits.hits.map(product => {\n            return {\n              id: product._source.productfields.unique_id,\n              name: product._source.productfields.product_name[\"en-us\"],\n              dimensions:\n                product._source.productcard &&\n                product._source.productcard.dimensionsin,\n              image:\n                product._source.productcard &&\n                product._source.productcard.featureimage,\n              quantity: 1,\n              price_cad: product._source.productfields.base_price_cad,\n              price_usd: product._source.productfields.base_price_usd\n            };\n          });\n          this.isLoading = false;\n        });\n    },\n    onSelect: function() {\n      this.save(this.selectedTypes);\n    },\n    save: function(value) {\n      this.$emit(\"update:value\", value);\n    }\n  }\n};\n</script>\n\n<style src=\"vue-multiselect/dist/vue-multiselect.min.css\"></style>\n<style scoped></style>\n"],"sourceRoot":"src/components"}]}