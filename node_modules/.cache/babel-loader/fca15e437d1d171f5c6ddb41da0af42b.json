{"remainingRequest":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/thread-loader/dist/cjs.js!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/babel-loader/lib/index.js!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/src/App.vue","mtime":1623329223078},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/cache-loader/dist/cjs.js","mtime":1623402537694},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/thread-loader/dist/cjs.js","mtime":1623402537712},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/babel-loader/lib/index.js","mtime":1623402537665},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/cache-loader/dist/cjs.js","mtime":1623402537694},{"path":"/Users/matiascaballero/matidev/abg/abg-custom-element-product-selector/node_modules/vue-loader/lib/index.js","mtime":1623402546143}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgovKmdsb2JhbCBDdXN0b21FbGVtZW50Ki8KaW1wb3J0IENhbGxvdXQgZnJvbSAiLi9jb21wb25lbnRzL0NhbGxvdXQiOwppbXBvcnQgRGVidWcgZnJvbSAiLi9jb21wb25lbnRzL0RlYnVnIjsKaW1wb3J0IENvbnRlbnRUeXBlU2VsZWN0b3IgZnJvbSAiLi9jb21wb25lbnRzL0NvbnRlbnRUeXBlU2VsZWN0b3IiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCB7IEdsb2JhbEV2ZW50QnVzIH0gZnJvbSAiLi9nbG9iYWxFdmVudEJ1cyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYXBwIiwKICBjb21wb25lbnRzOiB7CiAgICBDYWxsb3V0OiBDYWxsb3V0LAogICAgRGVidWc6IERlYnVnLAogICAgQ29udGVudFR5cGVTZWxlY3RvcjogQ29udGVudFR5cGVTZWxlY3RvcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRlZDogZmFsc2UsCiAgICAgIGVycm9yTWVzc2FnZTogIiIsCiAgICAgIGVsZW1lbnQ6IHt9LAogICAgICBjb250ZXh0OiB7fSwKICAgICAgdmFsdWU6IG51bGwKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdHJ5IHsKICAgICAgQ3VzdG9tRWxlbWVudC5pbml0KHRoaXMuaW5pdGlhbGl6ZSk7CiAgICAgIEN1c3RvbUVsZW1lbnQub25EaXNhYmxlZENoYW5nZWQodGhpcy5oYW5kbGVEaXNhYmxlKTsKICAgICAgQ3VzdG9tRWxlbWVudC5vYnNlcnZlRWxlbWVudENoYW5nZXMoW10sIGZ1bmN0aW9uIChlbGVtZW50Q29kZW5hbWUpIHsKICAgICAgICBHbG9iYWxFdmVudEJ1cy4kZW1pdCgib25FbGVtZW50Q2hhbmdlZCIsIGVsZW1lbnRDb2RlbmFtZVswXSk7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvcjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEVsZW1lbnRWYWx1ZTogZnVuY3Rpb24gZ2V0RWxlbWVudFZhbHVlKGVsZW1lbnRDb2RlbmFtZSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBDdXN0b21FbGVtZW50LmdldEVsZW1lbnRWYWx1ZShlbGVtZW50Q29kZW5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICByZXNvbHZlKHZhbHVlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGlzYWJsZTogZnVuY3Rpb24gaGFuZGxlRGlzYWJsZShkaXNhYmxlU3RhdGUpIHsKICAgICAgdGhpcy5lbGVtZW50LmRpc2FibGVkID0gZGlzYWJsZVN0YXRlOwogICAgfSwKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUoZWxlbWVudCwgY29udGV4dCkgewogICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50OwogICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICB0aGlzLnZhbHVlID0gdGhpcy5lbGVtZW50LnZhbHVlID8gSlNPTi5wYXJzZSh0aGlzLmVsZW1lbnQudmFsdWUpIDogbnVsbDsKICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlOwogICAgICB0aGlzLnVwZGF0ZVNpemUoKTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKHZhbHVlKSB7CiAgICAgIC8vIEV4cGxpY2l0bHkgdXNpbmcgPT0gdG8gbWF0Y2ggYm90aCBudWxsIGFuZCB1bmRlZmluZWQKICAgICAgdmFyIHRvU2F2ZSA9IHZhbHVlID09IG51bGwgPyBudWxsIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpOwogICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSB0b1NhdmU7CiAgICAgIEN1c3RvbUVsZW1lbnQuc2V0VmFsdWUodG9TYXZlKTsKICAgIH0sCiAgICB1cGRhdGVTaXplOiBmdW5jdGlvbiB1cGRhdGVTaXplKCkgewogICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCwgZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQpOwogICAgICAgIEN1c3RvbUVsZW1lbnQuc2V0SGVpZ2h0KGhlaWdodCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShuZXdWYWx1ZSkgewogICAgICB0aGlzLnNhdmUobmV3VmFsdWUpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,KAAA,MAAA,oBAAA;AACA,OAAA,mBAAA,MAAA,kCAAA;AACA,OAAA,GAAA,MAAA,KAAA;AACA,SAAA,cAAA,QAAA,kBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,KAAA,EAAA,KAFA;AAGA,IAAA,mBAAA,EAAA;AAHA,GAFA;AAOA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA;AALA,KAAA;AAAA,GAPA;AAcA,EAAA,OAAA,EAAA,mBAAA;AACA,QAAA;AACA,MAAA,aAAA,CAAA,IAAA,CAAA,KAAA,UAAA;AAEA,MAAA,aAAA,CAAA,iBAAA,CAAA,KAAA,aAAA;AACA,MAAA,aAAA,CAAA,qBAAA,CAAA,EAAA,EAAA,UAAA,eAAA,EAAA;AACA,QAAA,cAAA,CAAA,KAAA,CAAA,kBAAA,EAAA,eAAA,CAAA,CAAA,CAAA;AACA,OAFA;AAGA,KAPA,CAOA,OAAA,KAAA,EAAA;AACA,WAAA,YAAA,GAAA,KAAA;AACA;AACA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,eAAA,EAAA,yBAAA,eAAA,EAAA;AACA,aAAA,IAAA,OAAA,CAAA,UAAA,OAAA,EAAA,MAAA,EAAA;AACA,YAAA;AACA,UAAA,aAAA,CAAA,eAAA,CAAA,eAAA,EAAA,UAAA,KAAA,EAAA;AACA,YAAA,OAAA,CAAA,KAAA,CAAA;AACA,WAFA;AAGA,SAJA,CAIA,OAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA;AACA;AACA,OARA,CAAA;AASA,KAXA;AAYA,IAAA,aAAA,EAAA,uBAAA,YAAA,EAAA;AACA,WAAA,OAAA,CAAA,QAAA,GAAA,YAAA;AACA,KAdA;AAeA,IAAA,UAAA,EAAA,oBAAA,OAAA,EAAA,OAAA,EAAA;AACA,WAAA,OAAA,GAAA,OAAA;AACA,WAAA,OAAA,GAAA,OAAA;AACA,WAAA,KAAA,GAAA,KAAA,OAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,OAAA,CAAA,KAAA,CAAA,GAAA,IAAA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,WAAA,UAAA;AACA,KArBA;AAsBA,IAAA,IAAA,EAAA,cAAA,KAAA,EAAA;AACA;AACA,UAAA,MAAA,GAAA,KAAA,IAAA,IAAA,GAAA,IAAA,GAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA;AACA,WAAA,OAAA,CAAA,KAAA,GAAA,MAAA;AACA,MAAA,aAAA,CAAA,QAAA,CAAA,MAAA;AACA,KA3BA;AA4BA,IAAA,UA5BA,wBA4BA;AACA,MAAA,GAAA,CAAA,QAAA,CAAA,YAAA;AACA,YAAA,MAAA,GAAA,IAAA,CAAA,GAAA,CACA,QAAA,CAAA,IAAA,CAAA,YADA,EAEA,QAAA,CAAA,IAAA,CAAA,YAFA,EAGA,QAAA,CAAA,eAAA,CAAA,YAHA,CAAA;AAMA,QAAA,aAAA,CAAA,SAAA,CAAA,MAAA;AACA,OARA;AASA;AAtCA,GA1BA;AAkEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,eAAA,QAAA,EAAA;AACA,WAAA,IAAA,CAAA,QAAA;AACA;AAHA;AAlEA,CAAA","sourcesContent":["<template>\n  <div id=\"app\">\n    <Callout v-if=\"errorMessage\" type=\"error\" title=\"Something went wrong\">\n      <p>\n        {{ errorMessage }}\n      </p>\n    </Callout>\n    <div v-if=\"loaded\">\n      <ContentTypeSelector\n        :element=\"element\"\n        :context=\"context\"\n        :value.sync=\"value\"\n      />\n      <Debug\n        :element=\"element\"\n        :context=\"context\"\n        :value=\"value\"\n        @handleDisable=\"handleDisable\"\n      />\n      <resize-observer @notify=\"updateSize\" />\n    </div>\n  </div>\n</template>\n\n<script>\n/*global CustomElement*/\nimport Callout from \"./components/Callout\";\nimport Debug from \"./components/Debug\";\nimport ContentTypeSelector from \"./components/ContentTypeSelector\";\nimport Vue from \"vue\";\nimport { GlobalEventBus } from \"./globalEventBus\";\n\nexport default {\n  name: \"app\",\n  components: {\n    Callout,\n    Debug,\n    ContentTypeSelector\n  },\n  data: () => ({\n    loaded: false,\n    errorMessage: \"\",\n    element: {},\n    context: {},\n    value: null\n  }),\n  created: function() {\n    try {\n      CustomElement.init(this.initialize);\n\n      CustomElement.onDisabledChanged(this.handleDisable);\n      CustomElement.observeElementChanges([], elementCodename => {\n        GlobalEventBus.$emit(\"onElementChanged\", elementCodename[0]);\n      });\n    } catch (error) {\n      this.errorMessage = error;\n    }\n  },\n  methods: {\n    getElementValue: function(elementCodename) {\n      return new Promise((resolve, reject) => {\n        try {\n          CustomElement.getElementValue(elementCodename, value => {\n            resolve(value);\n          });\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    handleDisable: function(disableState) {\n      this.element.disabled = disableState;\n    },\n    initialize: function(element, context) {\n      this.element = element;\n      this.context = context;\n      this.value = this.element.value ? JSON.parse(this.element.value) : null;\n      this.loaded = true;\n      this.updateSize();\n    },\n    save: function(value) {\n      // Explicitly using == to match both null and undefined\n      const toSave = value == null ? null : JSON.stringify(value);\n      this.element.value = toSave;\n      CustomElement.setValue(toSave);\n    },\n    updateSize() {\n      Vue.nextTick(function() {\n        const height = Math.max(\n          document.body.scrollHeight,\n          document.body.offsetHeight,\n          document.documentElement.offsetHeight\n        );\n\n        CustomElement.setHeight(height);\n      });\n    }\n  },\n  watch: {\n    value: function(newValue) {\n      this.save(newValue);\n    }\n  }\n};\n</script>\n\n<style>\nhtml {\n  position: relative;\n}\n#app {\n  padding-top: 0.5em;\n}\n</style>\n"],"sourceRoot":"src"}]}